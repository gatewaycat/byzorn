%%%%%%%%%%%%%%%%%%%%
%
% DIRECTIONS
% Students count off 1, 2, 3, ..., 7, do the one question,
% then explain their answer to their neighbor.
% Perhaps volunteers fill out answer key (+doc camera).
%
%%%%%%%%%%%%%%%%%%%%

\RequirePackage{luatex85}
\documentclass[10pt, addpoints]{exam}
\usepackage{tikz, pgfplots, amsmath, mathtools, multicol}
%\pgfplotsset{compat=1.15}
\usepackage[letterpaper, margin=0.5in, column sep=1in]{geometry}
\setlength\parindent{0mm}

% define macro \Repeat{integer}{content}
\usepackage{expl3}
\ExplSyntaxOn
\cs_new_eq:NN \Repeat \prg_replicate:nn
\ExplSyntaxOff

\usepackage{hyperref}

% diagram for questions on pages 1 and 3
\def\yscaleone{3} % = amount to shrink diagram in y direction
\newcommand\diagram{
\fullwidth{
\begin{center}
\begin{tikzpicture}
	[very thick, yscale=1/\yscaleone]
	% grid
	\draw[gray, semithick] (1,0) grid (12,20.5);
	\draw[gray, semithick, xstep=10,xshift=-1cm] (0,0) grid (15.25,20.5);
	% x- and y-axes
	\draw[<->, semithick] (-1,21) -- node[pos=0.03, right] {$y$} (-1,0) -- node[pos=0.99, above] {$x$} (14.5,0);
	% labels on y-axis
	\foreach \y in {0,10,...,200}
	\draw (-1,\y/10) node[left] {\y};
	% labels on x-axis
	\foreach \x in {1,...,12}
	\draw (\x,0) node[below] {\x};
	% vertical asymptotes
	\foreach \x in {8,...,12}
	\draw[dashed] (\x,0) -- (\x,20.5);
	% horizontal asymptotes
	\foreach \y in {9,6}
	\draw[dashed] (-1,\y) -- (14.25,\y);
	% plot five curves on left half
	\draw[smooth] plot coordinates{(-1,8.85) (0.2,8.6) (1,7) (2,2) (3.15,1.15) (4,5)};
	\draw (4,8) -- (5,7);
	\draw (5,16) to [bend right=10] (6,10);
	\draw (6,14) -- (7,13);
	\draw (7,17) to [bend left=10]  (8,11);
	% plot five asymptotic curves on right half
	\draw[smooth] plot coordinates {(8.1,20.5) (8.2,15) (8.8,15) (8.9,20.5)};
	\draw[smooth] plot coordinates {(9.1,20.5) (9.2,12) (9.8,8) (9.9,0)};
	\draw[smooth] plot coordinates {(10.1,20.5) (10.2,13) (10.8,13) (10.9,20.5)};
	\draw[smooth] plot coordinates {(11.1,0) (11.2,10.5) (11.8,10.5) (11.9,0)};
	\draw[smooth] plot coordinates {(12.1,0) (12.4,5) (14.25,5.85)};
	% open circles
	\foreach \x/\y in {2/2, 3/1, 4/5, 4/8, 5/7, 5/16, 6/10, 7/17, 8/11}
	\draw[black, fill=white, yscale=\yscaleone] (\x,\y/\yscaleone) circle (3pt);
	% closed circles
	\foreach \x/\y in {3/4, 5/19, 6/14, 7/13, 8/3, 11/15, 12/18}
	\draw[black, fill=black, yscale=\yscaleone] (\x,\y/\yscaleone) circle (2.5pt);
	% f(x) label
	\draw (1.5,15) node[fill,white] {\color{black} \huge$f(x)$};
	\end{tikzpicture}
	\end{center}
	}
	
	\vspace{-1em}
	}

% template for questions 1 through 12 on page 1
\newcommand\threelim{
\question $\left\{\begin{aligned}
	\phantom{\lim_{x\to \mathbf{\arabic{question}}^+}} f(\arabic{question}) &=
	\\[-0.5ex] \lim_{x\to \mathbf{\arabic{question}}^-}f(x) &=
	\\[-0.5ex] \lim_{x\to \mathbf{\arabic{question}}^+}f(x) &=
	\\[-0.5ex] \lim_{x\to \mathbf{\arabic{question}}\phantom{^+}}f(x) &=
	\end{aligned}\right.$}

% template for questions 15 through 26 on page 2
\newcommand\fivelim[4]{
	\question
	\(\begin{matrix}
	\begin{tikzpicture}
	\begin{axis}[
		every axis/.append style={font=\tiny}, 
		xmin=-3.1, xmax=3.1,
		ymin=-2.4, ymax=2.4,
		samples=99, 
		major tick length={0},
		line width=1pt,
		axis lines=center, height=1.6in, width=2in, grid=major,
		restrict y to domain=-2.4:2.4, 
		% title={\normalsize{\unboldmath$\displaystyle f(x) = #1$}},
		extra y tick style={y tick label style={right}},
		#3,
		% samples=59 % speed up compile for testing
		]
		\addplot [black, smooth, thick, domain=-3:3] {#2};
		#4
	\end{axis}
	\end{tikzpicture}
	\end{matrix}\)
	
	\vspace{-3mm}
	\fullwidth{\(\begin{aligned}
		\phantom{\lim_{x\to \mathbf0^+}} f(x) &= \smash{#1}
		\\[-0.9ex] \phantom{\lim_{x\to \mathbf0^+}} f(0) &= \one
		\\[-0.9ex] \lim_{x\to \mathbf0^-}f(x) &= \two
		\\[-0.9ex] \lim_{x\to \mathbf0^+}f(x) &= \three
		\\[-0.9ex] \lim_{x\to \mathbf0\phantom{^+}}f(x) &= \four
		\\[-0.9ex] \lim_{x\to \mathrlap{-\infty}\phantom{\mathbf0{^+}}}f(x) &= \five
		\\[-0.9ex] \lim_{x\to \mathrlap{+\infty}\phantom{\mathbf0{^+}}}f(x) &= \six
		\end{aligned}\)}
\def\one{}
\def\two{}
\def\three{}
\def\four{}
\def\five{}
\def\six{}
	}
\def\one{}
\def\two{}
\def\three{}
\def\four{}
\def\five{}
\def\six{}

\newcommand\fivelima[3]{\fivelim{#1}{#2}{#3}{}}
\newcommand\fivelimb[2]{\fivelima{#1}{#2}{grid=none, ticks=none}}
\newcommand\opencircle[1]{\draw[color=black,fill=white,thick] (axis cs:{#1}) circle [radius=2pt];}

\thispagestyle{empty}
\pagestyle{empty}
\begin{document}
\diagram

\begin{questions}
\section{Find Limits Graphically}
\begin{multicols}3
\Repeat 7 \threelim
\end{multicols}

\section{Find Limits Involving Infinity Graphically}
\begin{multicols}3
\Repeat 5 \threelim
\bigskip
\question $\lim\limits_{x\to \mathbf{-\infty}}f(x) =$
\question $\lim\limits_{x\to \mathbf{+\infty}}f(x) =$
\end{multicols}

\clearpage
\section{Famous Functions}
\setlength\columnsep{8mm}
\raggedcolumns
\begin{multicols}4
\fivelimb{1/x}{1/x}
\fivelimb{1/x^2}{1/x/x}
\fivelimb{|x|}{abs(x)}
\fivelim{\sqrt[3]x}{0}{grid=none, ticks=none}{\addplot[black, smooth, thick, domain=-3:3] (x^3,x);}
\end{multicols}

\vfill
\begin{multicols}4
\fivelimb{x^3}{x^3}
\fivelima{e^x}{e^x}{ytick={1}, xtick={0}}
\fivelima{\ln(x)}{ln(x)}{ytick={0}, xtick={1}}
\fivelim{\frac{\left| x \right|}x}{floor(x/10)*2+1}
	{ytick={1},extra y ticks={-1},xtick={0},samples={501}}{\opencircle{0,1} \opencircle{0,-1}}
\end{multicols}

\vfill
\begin{multicols}4
\def\five{\text{DNE}}
\def\six{\text{DNE}}
\fivelima{\cos(x)}{cos(deg(x)*2)}{ytick={-1,1},xtick={0}}

%	\fivelim{\frac{\sin(x)}x}{sin(deg(x*3))/(x*3)}{ytick={-1,1},xtick={0}}{\opencircle{0,1}}
\fivelim{\frac{\sin(x)}x}{cos(deg(x*6))*exp(-abs(x/1.25))}{ytick={-1,1},xtick={0}}{\opencircle{0,1}}


\def\one{\text{DNE}}
\def\two{\text{DNE}}
\def\three{\text{DNE}}
\def\four{\text{DNE}}
\fivelima{\sin(1/x)}{sin(deg(1/x*1.5))}{ytick={-1,1},xtick={0},samples={720}}

\fivelima{x\sin(1/x)}{x/3*sin(deg(1/x*3))}{ytick={-1,1},xtick={0},samples={720}}
\end{multicols}

\newpage
\diagram
\vspace{-4mm}
\section{Identify Infinite, Jump, Removable Discontinuities Graphically}
\vspace{-3mm}
\question We say $f$ is
	\textbf{continuous} (cts) at $x=a$
	if $\lim\limits_{x\to a}f(x)$ is finite
	and equals $f(a)$.
	\par The function $f$ above is continuous
	at integers $x$ = \fillin[][2in].

\question We say $f$ has a 
	\fillin[\textbf{removable}][1in] discontinuity
	at \fillin[$x=a$][0.5in]
	if $\lim\limits_{x\to a}f(x)$ is finite
	and \emph{un}equal to $f(a)$.
	\par
	The function $f$ above has this type of discontinuity at integers $x$ = \fillin[][2in].

\question We say $f$ has a 
	\fillin[\textbf{jump}][1in] discontinuity
	at \fillin[$x=a$][0.5in]
	if $\lim\limits_{x\to a\smash{^+}}f(x)$ 
	and $\lim\limits_{x\to a\smash{^-}}f(x)$
	are finite but \emph{un}equal.
	\par
	The function $f$ above has this type of discontinuity at integers $x$ = \fillin[][2in].

\question We say $f$ has an
	\fillin[\textbf{infinite}][1in] discontinuity
	at \fillin[$x=a$][0.5in]
	if $\lim\limits_{x\to a\smash{^+}}f(x)$
	or $\lim\limits_{x\to a\smash{^-}}f(x)$
	is infinite.
	\par
	The function $f$ above has this type of discontinuity at integers $x$ = \fillin[][2in].

\vspace{-1mm}
\section{Continuity on an Interval}
\vspace{-2mm}
\question We say $f$ is 
	\textbf{continuous on the open interval
	\boldmath $(a,b)$}
	if $f$ is continuous at every $x$ 
	in $(a,b)$.
	\par Find the union of all open intervals
	\textbf{on which $f$
	is continuous}.
	\\[3ex] (Set-builder notation) \fillin[][5in]
	\\[3ex] (Interval notation) \fillin[][5in]
\question We say $f$ is \textbf{continuous everywhere}
	if $f$ is continuous at every $x$ in \fillin[][1in].
\question We say $f$ is 
	\textbf{a continuous function} 
	if $f$ is continuous at every 
	$x$ in its \fillin[][1in].

\vspace{-1mm}
\section{Left and Right Continuity}
\vspace{-4mm}
\question We say $f$ is \fillin[left][1in] 
	continuous at $x=a$
	if $\lim_{x\to a^+}f(x)$ is finite 
	and equals $f(a)$.
	\\[2ex]
	The function $f$ above
	has this type of continuity at integers
	$x$ = \fillin[][2in].

\question We say $f$ is \fillin[right][1in] 
	continuous at $x=a$
	if $\lim_{x\to a^-}f(x)$ is finite 
	and equals $f(a)$.
	\\[2ex]
	The function $f$ above
	has this type of continuity at integers
	$x$ = \fillin[][2in].

\question We say $f$ is \textbf{continuous on the closed interval \boldmath $[a,b]$}
	if $f$ is continuous at every $x$ in the \emph{open} interval $(a,b)$
	\\[2ex]
	and is \fillin[right continuous][2in] at $x=a$
	and is \fillin[left continuous][2in] at $x=b$.

\end{questions}
\end{document}